<div class="flex justify-between items-center mb-4">
  <h2 class="text-2xl font-semibold">Articles</h2>

  <button
    *ngIf="canCreate()"
    routerLink="/articles/new"
    class="px-3 py-1 text-sm rounded bg-blue-600 text-white hover:bg-blue-500"
  >
    + Nouvel article
  </button>
</div>

<div *ngIf="loading">Chargement...</div>

<div *ngIf="!loading && articles.length === 0" class="text-gray-500 text-sm">
  Aucun article pour le moment.
</div>

<div class="space-y-3" *ngIf="!loading && articles.length > 0">
  <div
    *ngFor="let article of articles"
    class="bg-white rounded shadow p-4 border flex gap-4 items-start"
  >
    <!-- Miniature -->
    <div *ngIf="getImageUrl(article)" class="w-24 h-24 flex-shrink-0">
      <img
        [src]="getImageUrl(article)"
        alt="image article"
        class="w-full h-full object-cover rounded border"
      />
    </div>

    <!-- Contenu -->
    <div class="flex-1">
      <h3 class="text-lg font-semibold mb-1">
        <a
          [routerLink]="['/articles', article._id]"
          class="hover:underline"
        >
          {{ article.title }}
        </a>
      </h3>
      <p class="text-xs text-gray-500 mb-1">
        Par {{ article.author?.name }} â€¢ {{ article.createdAt | date: 'short' }}
      </p>
      <p class="text-sm text-gray-700">
        {{ article.content | slice: 0: 160 }}{{ article.content.length > 160 ? '...' : '' }}
      </p>
    </div>
  </div>
</div>
