<div *ngIf="loading">Chargement...</div>

<div *ngIf="!loading && article" class="space-y-4">
  <div class="bg-white rounded shadow p-4 border">
    <h2 class="text-2xl font-semibold mb-2">
      {{ article.title }}
    </h2>

    <p class="text-xs text-gray-500 mb-2">
      Par {{ article.author?.name }} â€¢ {{ article.createdAt | date: 'short' }}
    </p>

    <div class="prose text-sm text-gray-800 whitespace-pre-line">
      {{ article.content }}
    </div>
<div *ngIf="getImageUrl()" class="mb-4">
  <img
    [src]="getImageUrl()"
    alt="image article"
    class="w-full max-h-72 object-cover rounded border"
  />
</div>


    <div class="mt-3 flex items-center gap-2 text-xs text-gray-600">
      <span *ngFor="let tag of article.tags" class="px-2 py-0.5 rounded bg-gray-100 border">
        #{{ tag }}
      </span>
    </div>

    <div class="mt-4 flex gap-2" *ngIf="auth.isLoggedIn()">
      <button
        *ngIf="canEdit()"
        [routerLink]="['/articles', article._id, 'edit']"
        class="px-3 py-1 text-xs rounded bg-yellow-500 text-white hover:bg-yellow-400"
      >
        Modifier
      </button>
      <button
        *ngIf="canDelete()"
        (click)="deleteArticle()"
        class="px-3 py-1 text-xs rounded bg-red-600 text-white hover:bg-red-500"
      >
        Supprimer
      </button>
    </div>
  </div>

  <app-comment-thread
    [articleId]="article._id"
    *ngIf="article"
  ></app-comment-thread>
</div>

<div *ngIf="!loading && !article" class="text-sm text-gray-600">
  Article introuvable.
</div>
